cmake_minimum_required(VERSION 3.20.0)

project(bavil_core)

massage(${CMAKE_TOOLCHAIN_FILE})

include(GNUInstallDirs)

#-------------------------------------------------------------------------------------------
# Options
#-------------------------------------------------------------------------------------------
option(BAVIL_BUILD_TESTS "Enable generation of build files for tests" OFF)

# --------------------------
# language option
# --------------------------
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS ON)

# --------------------------
# source characterset
# --------------------------
add_compile_options("$<$<C_COMPILER_ID:MSVC>:/utf-8>")
add_compile_options("$<$<CXX_COMPILER_ID:MSVC>:/utf-8>")

if(BAVIL_BUILD_TESTS)
    add_subdirectory(test)
endif()

set (CMAKE_MODULE_PATH "${CMAKE_MODULE_PATH};${CMAKE_CURRENT_SOURCE_DIR}/scripts/cmake")
include(bavil_core_source_lists)


add_library(${PROJECT_NAME} STATIC ${BVIL_CORE_PRIVATE_SOURCE_LISTS} ${BVIL_CORE_PUBLIC_SOURCE_LISTS})

target_include_directories(${PROJECT_NAME} PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/src/private)
target_include_directories(${PROJECT_NAME} PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/src/public)
